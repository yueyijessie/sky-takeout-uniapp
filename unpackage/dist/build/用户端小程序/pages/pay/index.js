(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/index"],{"28f9":function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("2eee")),o=n(r("278c")),i=n(r("c973")),c=n(r("9523")),s=r("26cb"),u=r("4d84");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={data:function(){return{timeout:!1,rocallTime:"",orderId:null,orderDataInfo:{},activeRadio:0,payMethodList:["微信支付"],times:null}},created:function(){this.orderDataInfo=this.orderData()},mounted:function(){this.runTimeBack()},onLoad:function(e){this.orderId=e.orderId},methods:f(f({},(0,s.mapState)(["orderData","shopInfo"])),{},{handleSave:function(){var t=this;if(this.timeout)(0,u.cancelOrder)(this.orderId).then((function(e){})),e.redirectTo({url:"/pages/details/index?orderId="+this.orderId});else{clearTimeout(this.times);var r={orderNumber:this.orderDataInfo.orderNumber,payMethod:0===this.activeRadio?1:2};(0,u.paymentOrder)(r).then(function(){var r=(0,i.default)(a.default.mark((function r(n){var i,c,s,u;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!==n.code){r.next=19;break}return r.next=3,e.requestPayment(f(f({},n.data),{},{package:n.data.packageStr}));case 3:if(i=r.sent,c=(0,o.default)(i,2),s=c[0],u=c[1],console.log(s,u),!s){r.next=14;break}return r.next=11,e.showToast({title:"支付失败",icon:"error"});case 11:setTimeout((function(){e.redirectTo({url:"/pages/details/index?orderId="+t.orderId})}),1500),r.next=17;break;case 14:return r.next=16,e.showToast({title:"支付成功",icon:"success"});case 16:setTimeout((function(){e.redirectTo({url:"/pages/success/index?orderId="+t.orderId})}),1500);case 17:r.next=20;break;case 19:e.showToast({title:n.msg,duration:1e3,icon:"none"});case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},runTimeBack:function(){var e=Date.parse(this.orderDataInfo.orderTime.replace(/-/g,"/")),t=Date.parse(new Date),r=9e5-(t-e);if(r<0)this.timeout=!0,clearTimeout(this.times);else{var n=parseInt(r/1e3/60%60),a=parseInt(r/1e3%60);n=n<10?"0"+n:n,a=a<10?"0"+a:a,this.rocallTime=n+":"+a;var o=this;if(n>=0&&a>=0){if(0===n&&0===a)return this.timeout=!0,void clearTimeout(this.times);this.times=setTimeout((function(){o.runTimeBack()}),1e3)}}}})};t.default=l}).call(this,r("543d")["default"])},b282:function(e,t,r){"use strict";r.r(t);var n=r("d8a4"),a=r("c232");for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("36b8"),r("d46c");var i=r("f0c5"),c=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,"7b2a13f8",null,!1,n["a"],void 0);t["default"]=c.exports},bbf3:function(e,t,r){"use strict";(function(e,t){var n=r("4ea4");r("f373");n(r("66fd"));var a=n(r("b282"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(a.default)}).call(this,r("bc2e")["default"],r("543d")["createPage"])},c232:function(e,t,r){"use strict";r.r(t);var n=r("28f9"),a=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},d8a4:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=(this._self._c,this.shopInfo());this.$mp.data=Object.assign({},{$root:{m0:t}})},a=[]}},[["bbf3","common/runtime","common/vendor"]]]);